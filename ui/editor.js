"use strict";var _createClass=function(){function a(e,f){for(var h,g=0;g<f.length;g++)h=f[g],h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}return function(e,f,g){return f&&a(e.prototype,f),g&&a(e,g),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var __decorate=function(a,e,f,g){var l,h=arguments.length,j=3>h?e:null===g?g=Object.getOwnPropertyDescriptor(e,f):g;if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.decorate)j=Reflect.decorate(a,e,f,g);else for(var m=a.length-1;0<=m;m--)(l=a[m])&&(j=(3>h?l(j):3<h?l(e,f,j):l(e,f))||j);return 3<h&&j&&Object.defineProperty(e,f,j),j},__metadata=function(a,e){if("object"===("undefined"==typeof Reflect?"undefined":_typeof(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,e)},core_1=require("@angular/core"),util=require("errisy-util"),SpanEditor=function(){function a(e){_classCallCheck(this,a),this.elementRef=e,this.editorChange=new core_1.EventEmitter,this.span=this.elementRef.nativeElement,this.span.setAttribute("contenteditable","true")}return _createClass(a,[{key:"onKeydown",value:function(f){this.keyFilter&&this.keyFilter(f)}},{key:"onKeyup",value:function(){var f=this.span.innerHTML;this.value=util.unescapeHTML(f),this.editorChange.emit(this.value)}},{key:"editor",get:function(){return this.value},set:function(f){if(this.value!=f){this.value=f,null==this.value||void 0==this.value?this.value="":"string"!=typeof this.value&&(this.value+=""),this.span.innerHTML=util.escapeHTML(this.value);document}}},{key:"type",set:function(f){f&&(this.keyFilter="l"===f?function(g){if(g.key)/^([a-z0-9]|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||65<h&&91>h||96<h&&123>h||8==h||g.preventDefault()}}:"n"===f?function(g){if(g.key)/^(\d|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||65<h&&91>h||96<h&&123>h||8==h||g.preventDefault()}}:"z"===f?function(g){if(g.key)/^(\d|\-|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||8==h||g.preventDefault()}}:"r"===f?function(g){if(g.key)/^(\d|\-|\.|F\d+|Tab|ArrowLeft|ArrowRight|Backspace|Delete)$/i.test(g.key)||g.preventDefault();else if(g.keyCode){var h=g.keyCode;45==h||47<h&&58>h||46==h||8==h||g.preventDefault()}}:void 0)}}]),a}();__decorate([core_1.Output(),__metadata("design:type",Object)],SpanEditor.prototype,"editorChange",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[String])],SpanEditor.prototype,"editor",null),__decorate([core_1.Input(),__metadata("design:type",String),__metadata("design:paramtypes",[String])],SpanEditor.prototype,"type",null),__decorate([core_1.HostListener("keydown",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[KeyboardEvent]),__metadata("design:returntype",void 0)],SpanEditor.prototype,"onKeydown",null),__decorate([core_1.HostListener("keyup"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],SpanEditor.prototype,"onKeyup",null),SpanEditor=__decorate([core_1.Directive({selector:"[editor]"}),__metadata("design:paramtypes",[core_1.ElementRef])],SpanEditor),exports.SpanEditor=SpanEditor;