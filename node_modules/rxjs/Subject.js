"use strict";var __extends=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Observable_1=require("rxjs/Observable"),Subscriber_1=require("rxjs/Subscriber"),Subscription_1=require("rxjs/Subscription"),ObjectUnsubscribedError_1=require("rxjs/util/ObjectUnsubscribedError"),SubjectSubscription_1=require("rxjs/SubjectSubscription"),rxSubscriber_1=require("rxjs/symbol/rxSubscriber"),SubjectSubscriber=function(a){function c(e){a.call(this,e),this.destination=e}return __extends(c,a),c}(Subscriber_1.Subscriber);exports.SubjectSubscriber=SubjectSubscriber;var Subject=function(a){function c(){a.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return __extends(c,a),c.prototype[rxSubscriber_1.$$rxSubscriber]=function(){return new SubjectSubscriber(this)},c.prototype.lift=function(e){var f=new AnonymousSubject(this,this);return f.operator=e,f},c.prototype.next=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;if(!this.isStopped)for(var f=this.observers,g=f.length,h=f.slice(),j=0;j<g;j++)h[j].next(e)},c.prototype.error=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var f=this.observers,g=f.length,h=f.slice(),j=0;j<g;j++)h[j].error(e);this.observers.length=0},c.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,f=e.length,g=e.slice(),h=0;h<f;h++)g[h].complete();this.observers.length=0},c.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},c.prototype._subscribe=function(e){if(this.closed)throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError;else return this.hasError?(e.error(this.thrownError),Subscription_1.Subscription.EMPTY):this.isStopped?(e.complete(),Subscription_1.Subscription.EMPTY):(this.observers.push(e),new SubjectSubscription_1.SubjectSubscription(this,e))},c.prototype.asObservable=function(){var e=new Observable_1.Observable;return e.source=this,e},c.create=function(e,f){return new AnonymousSubject(e,f)},c}(Observable_1.Observable);exports.Subject=Subject;var AnonymousSubject=function(a){function c(e,f){a.call(this),this.destination=e,this.source=f}return __extends(c,a),c.prototype.next=function(e){var f=this.destination;f&&f.next&&f.next(e)},c.prototype.error=function(e){var f=this.destination;f&&f.error&&this.destination.error(e)},c.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},c.prototype._subscribe=function(e){var f=this.source;return f?this.source.subscribe(e):Subscription_1.Subscription.EMPTY},c}(Subject);exports.AnonymousSubject=AnonymousSubject;