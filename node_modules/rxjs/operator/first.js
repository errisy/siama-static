"use strict";var __extends=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},Subscriber_1=require("rxjs/Subscriber"),EmptyError_1=require("rxjs/util/EmptyError");function first(a,c,e){return this.lift(new FirstOperator(a,c,e,this))}exports.first=first;var FirstOperator=function(){function a(c,e,f,g){this.predicate=c,this.resultSelector=e,this.defaultValue=f,this.source=g}return a.prototype.call=function(c,e){return e._subscribe(new FirstSubscriber(c,this.predicate,this.resultSelector,this.defaultValue,this.source))},a}(),FirstSubscriber=function(a){function c(e,f,g,h,i){a.call(this,e),this.predicate=f,this.resultSelector=g,this.defaultValue=h,this.source=i,this.index=0,this.hasCompleted=!1}return __extends(c,a),c.prototype._next=function(e){var f=this.index++;this.predicate?this._tryPredicate(e,f):this._emit(e,f)},c.prototype._tryPredicate=function(e,f){var g;try{g=this.predicate(e,f,this.source)}catch(h){return void this.destination.error(h)}g&&this._emit(e,f)},c.prototype._emit=function(e,f){return this.resultSelector?void this._tryResultSelector(e,f):void this._emitFinal(e)},c.prototype._tryResultSelector=function(e,f){var g;try{g=this.resultSelector(e,f)}catch(h){return void this.destination.error(h)}this._emitFinal(g)},c.prototype._emitFinal=function(e){var f=this.destination;f.next(e),f.complete(),this.hasCompleted=!0},c.prototype._complete=function(){var e=this.destination;this.hasCompleted||"undefined"==typeof this.defaultValue?!this.hasCompleted&&e.error(new EmptyError_1.EmptyError):(e.next(this.defaultValue),e.complete())},c}(Subscriber_1.Subscriber);