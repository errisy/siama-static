"use strict";var __extends=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},root_1=require("rxjs/util/root"),Observable_1=require("rxjs/Observable"),PromiseObservable=function(a){function c(e,f){a.call(this),this.promise=e,this.scheduler=f}return __extends(c,a),c.create=function(e,f){return new c(e,f)},c.prototype._subscribe=function(e){var f=this,g=this.promise,h=this.scheduler;if(null==h)this._isScalar?!e.closed&&(e.next(this.value),e.complete()):g.then(function(i){f.value=i,f._isScalar=!0,e.closed||(e.next(i),e.complete())},function(i){e.closed||e.error(i)}).then(null,function(i){root_1.root.setTimeout(function(){throw i})});else if(!this._isScalar)g.then(function(i){f.value=i,f._isScalar=!0,e.closed||e.add(h.schedule(dispatchNext,0,{value:i,subscriber:e}))},function(i){e.closed||e.add(h.schedule(dispatchError,0,{err:i,subscriber:e}))}).then(null,function(i){root_1.root.setTimeout(function(){throw i})});else if(!e.closed)return h.schedule(dispatchNext,0,{value:this.value,subscriber:e})},c}(Observable_1.Observable);exports.PromiseObservable=PromiseObservable;function dispatchNext(a){var c=a.value,e=a.subscriber;e.closed||(e.next(c),e.complete())}function dispatchError(a){var c=a.err,e=a.subscriber;e.closed||e.error(c)}