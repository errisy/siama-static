"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},__extends=function(a,c){function e(){this.constructor=a}for(var f in c)c.hasOwnProperty(f)&&(a[f]=c[f]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},isFunction_1=require("rxjs/util/isFunction"),Subscription_1=require("rxjs/Subscription"),Observer_1=require("rxjs/Observer"),rxSubscriber_1=require("rxjs/symbol/rxSubscriber"),Subscriber=function(a){function c(e,f,g){switch(a.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Observer_1.empty;break;case 1:if(!e){this.destination=Observer_1.empty;break}if("object"===("undefined"==typeof e?"undefined":_typeof(e))){e instanceof c?(this.destination=e,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new SafeSubscriber(this,e,f,g);}}return __extends(c,a),c.prototype[rxSubscriber_1.$$rxSubscriber]=function(){return this},c.create=function(e,f,g){var h=new c(e,f,g);return h.syncErrorThrowable=!1,h},c.prototype.next=function(e){this.isStopped||this._next(e)},c.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},c.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},c.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},c.prototype._next=function(e){this.destination.next(e)},c.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},c.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},c}(Subscription_1.Subscription);exports.Subscriber=Subscriber;var SafeSubscriber=function(a){function c(e,f,g,h){a.call(this),this._parent=e;var i,j=this;isFunction_1.isFunction(f)?i=f:f&&(j=f,i=f.next,g=f.error,h=f.complete,isFunction_1.isFunction(j.unsubscribe)&&this.add(j.unsubscribe.bind(j)),j.unsubscribe=this.unsubscribe.bind(this)),this._context=j,this._next=i,this._error=g,this._complete=h}return __extends(c,a),c.prototype.next=function(e){if(!this.isStopped&&this._next){var f=this._parent;f.syncErrorThrowable?this.__tryOrSetError(f,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},c.prototype.error=function(e){if(!this.isStopped){var f=this._parent;if(this._error)f.syncErrorThrowable?(this.__tryOrSetError(f,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(!f.syncErrorThrowable)throw this.unsubscribe(),e;else f.syncErrorValue=e,f.syncErrorThrown=!0,this.unsubscribe()}},c.prototype.complete=function(){if(!this.isStopped){var e=this._parent;this._complete?e.syncErrorThrowable?(this.__tryOrSetError(e,this._complete),this.unsubscribe()):(this.__tryOrUnsub(this._complete),this.unsubscribe()):this.unsubscribe()}},c.prototype.__tryOrUnsub=function(e,f){try{e.call(this._context,f)}catch(g){throw this.unsubscribe(),g}},c.prototype.__tryOrSetError=function(e,f,g){try{f.call(this._context,g)}catch(h){return e.syncErrorValue=h,e.syncErrorThrown=!0,!0}return!1},c.prototype._unsubscribe=function(){var e=this._parent;this._context=null,this._parent=null,e.unsubscribe()},c}(Subscriber);